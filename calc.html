<html>
<head>
    <meta charset="utf-8">
    <title>Factorio Calculator</title>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="calc.css">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66808523-1', 'auto');
  ga('send', 'pageview');

</script>
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="third_party/dagre-d3.min.js"></script>
    <script src="third_party/BigInteger.min.js"></script>
    <script src="third_party/pako.min.js"></script>
    <script src="third_party/sprintf.js"></script>
    <script src="sort.js"></script>
    <script src="rational.js"></script>
    <script src="matrix.js"></script>
    <script src="dropdown.js"></script>
    <script src="vectorize.js"></script>
    <script src="subgraphs.js"></script>
    <script src="factory.js"></script>
    <script src="item.js"></script>
    <script src="group.js"></script>
    <script src="recipe.js"></script>
    <script src="module.js"></script>
    <script src="totals.js"></script>
    <script src="solve.js"></script>
    <script src="fragment.js"></script>
    <script src="events.js"></script>
    <script src="target.js"></script>
    <script src="display.js"></script>
    <script src="visualize.js"></script>
    <script src="icon.js"></script>
    <script src="settings.js"></script>
    <script src="init.js"></script>
</head>

<!--Copyright 2015-2017 Kirk McDonald

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.-->

<body onload="init()">
    <ul id="targets" class="targets"><li><button class="targetButton ui" title="Add new item." onclick="plusHandler()">+</a></li></ul>

    <div class="tabs">
        <button class="tab_button" id="totals_button" onclick="clickTab('totals_tab')">Factories</button>
        <button class="tab_button" id="steps_button" onclick="clickTab('steps_tab')">Items</button>
        <button class="tab_button" id="graph_button" onclick="clickVisualize('graph_tab')">Visualize</button>
        <button class="tab_button" id="settings_button" onclick="clickTab('settings_tab')">Settings</button>
        <button class="tab_button" id="faq_button" onclick="clickTab('faq_tab')">FAQ</button>
        <button class="tab_button" id="about_button" onclick="clickTab('about_tab')">About</button>
    </div>

    <div id="steps_tab" class="tab">
        <table id="steps"></table>
    </div>

    <div id="totals_tab" class="tab">
        <table id="totals"></table>
        <span class="displaylink">[<a onclick="toggleVisible('csv_box')">CSV</a>]</span>
        <div id="csv_box" style="display: none;"><textarea id="csv" readonly></textarea></div>
    </div>

    <div id="graph_tab" class="tab graph">
        <svg id="graph"><g /></svg>
    </div>

    <div id="settings_tab" class="tab">
        <table>
        <tr>
        <td class="setting-label">Use recipe set:</td>
        <td><select id="data_set" onchange="changeMod()"></select></td>
        </tr>

        <tr>
        <td class="setting-label top">Display rates as:</td>
        <td><form id="display_rate"></form></td>
        </tr>

        <tr>
        <td class="setting-label">Rate precision:</td>
        <td><input id="rprec" class="prec" type="number" value="3" min="0" onchange="changeRPrec(event)"></td>
        </tr>
        <tr>
        <td class="setting-label">Factory precision:</td>
        <td><input id="fprec" class="prec" type="number" value="1" min="0" onchange="changeFPrec(event)"></td>
        </tr>

        <tr>
        <td class="setting-label">Minimum assembling machine level:</td>
        <td><span id="minimum_assembler"></span></td>
        </tr>

        <tr>
        <td class="setting-label">Preferred furnace:</td>
        <td><span id="furnace"></span></td>
        </tr>

        <tr>
        <td class="setting-label">Mining productivity bonus:</td>
        <td>+<input id="mprod" class="mprod" type="number" step="2" value="0" min="0" onchange="changeMprod()">%</td>
        </tr>

        <tr>
        <td class="setting-label top">Recipe sort order:</td>
        <td><input type="radio" name="sort_order" id="topo_order" value="topo" checked onchange="changeSortOrder(event)">
        <label for="topo_order">Topological order</label><br />
        <input type="radio" name="sort_order" id="alpha_order" value="alpha" onchange="changeSortOrder(event)">
        <label for="alpha_order">Alphabetical order</label></td>
        </tr>

        <tr>
        <td class="setting-label top">Format values as:</td>
        <td><input type="radio" name="format" id="decimal_format" value="decimal" checked onchange="changeFormat(event)">
        <label for="decimal_format">Decimals</label><br />
        <input type="radio" name="format" id="rational_format" value="rational" onchange="changeFormat(event)">
        <label for="rational_format">Rationals</label></td>
        </tr>
        </table>
    </div>

    <div id="about_tab" class="tab">
    <div class="about-content">
        This calculator is copyright 2015-2017 Kirk McDonald. It is licensed under the Apache License 2.0, and its source may be <a href="https://github.com/KirkMcDonald/kirkmcdonald.github.io">found on github, here</a>.
        <p>
        This calculator is the result of a few years' worth of fooling around, off and on, with performing calculations using Factorio's recipe graph. You may find an essay on the subject, which outlines the techniques used in this calculator, <a href="http://kirkmcdonald.github.io/posts/calculation.html">here</a>.
        <p>
        Features of this calculator include:
        <ul><li>Proper handling of oil products. Obtaining numbers for these recipes can be tricky, as several of the items involved may be produced from multiple recipes.
        <li>Support for modules, including beacons.
        <li>Support for the mining productivity bonus, introduced in 0.15.
        <li>Support for "expensive" mode.
        <li>Arbitrary numerical precision. Calculations are performed using bigint rationals, so errors from floating-point calculations should not be an issue.
        <li>Support for multiple simultaneous outputs.
        <li>May display rates per second, minute, or hour.</ul>
    </div>
    </div>

    <div id="faq_tab" class="tab">
    <div class="about-content">
        <h3>Why are some of the numbers on the "Factories" tab different from what I expect?</h3>
        The rates on the "Factories" tab are <i>recipe rates</i>, that is, the <i>rate at which the recipe is crafted</i>. If the recipe yields more than one copy of an item, or if productivity modules are being used, this number will differ from the <i>item rate</i>. The item rate may be seen on the "Items" tab, as well as on the edges of the graph on the "Visualize" tab.

        <h3>Do the numbers in the "beacons" column represent the number of modules or the number of beacons?</h3>
        They represent the number of modules.

        <h3>What does clicking on a recipe's icon in the "Factories" tab do?</h3>
        It omits the dependencies of that recipe from the solution. The intent behind this feature is to model the case of building a factory when you are shipping in one or more ingredients from elsewhere. For example, if you are making an advanced circuit factory and want to ship in electronic circuits, and want to see the remaining copper cable requirements on their own.
        <p>
        Clicking on the icon a second time will restore its dependencies.
    </div>
    </div>
</body>
</html>
